<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>汽車科活動與即時彈幕</title>
  <link href="1112.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="relative">

<!-- Navbar -->
<header class="fixed w-full z-50">
  <nav class="container mx-auto flex justify-between items-center py-4 px-6">
    <div class="text-2xl font-bold">🚗 汽車科活動</div>
    <ul class="flex gap-6">
      <li><a href="#banner">主視覺</a></li>
      <li><a href="#cards">活動介紹</a></li>
      <li><a href="#contact">聯絡我們</a></li>
    </ul>
  </nav>
</header>

<main class="pt-24">

  <!-- Banner -->
  <section id="banner" class="h-[60vh] flex items-center justify-center relative">
    <h1>汽車科即時互動彈幕</h1>
  </section>

  <!-- 活動卡片區 -->
  <section id="cards" class="container mx-auto py-16 px-6">
    <h2 class="text-3xl font-bold mb-8 text-center">活動 / 課程介紹</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="card">
        <img src="https://cdn-icons-png.flaticon.com/512/743/743131.png" alt="引擎拆裝" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">引擎拆裝實習</h3>
          <p>學習引擎結構拆解與組裝，實作技能提升。</p>
        </div>
      </div>

      <div class="card">
        <img src="https://cdn-icons-png.flaticon.com/512/296/296216.png" alt="底盤結構" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">底盤結構分析</h3>
          <p>了解汽車底盤、懸吊與傳動結構，理論與實務結合。</p>
        </div>
      </div>

      <div class="card">
        <img src="https://cdn-icons-png.flaticon.com/512/2332/2332458.png" alt="電系診斷" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">汽車電系診斷</h3>
          <p>掌握電路檢測方法，學習車輛電系維修技巧。</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 彈幕互動區 -->
  <section id="danmakuSection" class="relative h-64 my-16 mx-6 flex flex-col items-center justify-center">
    <h2>點圖送彈幕互動</h2>
    <div class="flex gap-6">
      <img src="https://cdn-icons-png.flaticon.com/512/743/743131.png"
           onclick="sendMessage('引擎拆裝實習中！', 'var(--primary-red)')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/296/296216.png"
           onclick="sendMessage('底盤結構超重要', 'var(--primary-yellow)')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/2332/2332458.png"
           onclick="sendMessage('汽車電系診斷', 'var(--primary-blue)')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/809/809957.png"
           onclick="sendMessage('改裝不是亂改！', 'var(--primary-green)')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
    </div>

    <div class="absolute top-4 right-4 flex items-center gap-2 text-white">
      <span id="statusLight" class="w-3 h-3 rounded-full bg-red-500"></span>
      <span id="statusText">未連線</span>
    </div>

    <div id="danmakuArea" class="absolute inset-0 pointer-events-none"></div>
  </section>
 <section id="danmakuSection">…</section>
</main>

<!-- Footer -->
<footer id="contact">
  <p>聯絡我們: cartech@school.edu.tw | 版權所有 &copy; 2026 汽車科</p>
</footer>

<script>
  const ws = new WebSocket('ws://localhost:8080');
  const area = document.getElementById('danmakuArea');
  const statusLight = document.getElementById('statusLight');
  const statusText = document.getElementById('statusText');

  ws.onopen = () => {
    statusLight.className = 'w-3 h-3 rounded-full bg-green-500';
    statusText.textContent = '已連線';
  };

  ws.onclose = () => {
    statusLight.className = 'w-3 h-3 rounded-full bg-red-500';
    statusText.textContent = '未連線';
  };

  ws.onmessage = e => {
    const data = JSON.parse(e.data);
    createDanmaku(data.text, data.color);
  };

  function sendMessage(text, color) {
    ws.send(JSON.stringify({ text, color }));
  }

  function createDanmaku(text, color) {
    const msg = document.createElement('div');
    msg.textContent = text;
    msg.className = 'danmaku-msg';
    msg.style.color = color;

    const top = Math.random() * (window.innerHeight - 120);
    msg.style.top = top + 'px';
    msg.style.right = '-300px';

    area.appendChild(msg);

    const duration = 8000;
    msg.animate([
      { transform: 'translateX(0)' },
      { transform: `translateX(-${window.innerWidth + 400}px)` }
    ], { duration, easing: 'linear' });

    setTimeout(() => msg.remove(), duration);
  }
</script>
</body>
</html>
