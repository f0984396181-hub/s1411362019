<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>台灣旅遊網</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 via-black to-red-900 text-white relative overflow-x-hidden">

<!-- Navbar -->
<header class="fixed w-full bg-black/70 backdrop-blur z-50">
  <nav class="container mx-auto flex justify-between items-center py-4 px-6">
    <div class="text-2xl font-bold">🚗 汽車科活動</div>
    <ul class="flex gap-6">
      <li><a href="#banner" class="hover:text-red-400">主視覺</a></li>
      <li><a href="#cards" class="hover:text-red-400">活動介紹</a></li>
      <li><a href="#contact" class="hover:text-red-400">聯絡我們</a></li>
    </ul>
  </nav>
</header>

<main class="pt-24">

  <!-- Banner -->
  <section id="banner" class="h-[60vh] flex items-center justify-center bg-gradient-to-r from-gray-800 via-gray-900 to-black relative">
    <h1 class="text-5xl font-extrabold text-red-500 drop-shadow-lg text-center">
      汽車科即時互動彈幕
    </h1>
  </section>

  <!-- 活動卡片區 -->
  <section id="cards" class="container mx-auto py-16 px-6">
    <h2 class="text-3xl font-bold mb-8 text-center text-red-400">活動 / 課程介紹</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      
      <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:scale-105 transition">
        <img src="https://cdn-icons-png.flaticon.com/512/743/743131.png" alt="引擎拆裝" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">引擎拆裝實習</h3>
          <p class="text-gray-300">學習引擎結構拆解與組裝，實作技能提升。</p>
        </div>
      </div>

      <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:scale-105 transition">
        <img src="https://cdn-icons-png.flaticon.com/512/296/296216.png" alt="底盤結構" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">底盤結構分析</h3>
          <p class="text-gray-300">了解汽車底盤、懸吊與傳動結構，基礎理論與實務結合。</p>
        </div>
      </div>

      <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:scale-105 transition">
        <img src="https://cdn-icons-png.flaticon.com/512/2332/2332458.png" alt="電系診斷" class="w-full h-48 object-cover">
        <div class="p-4">
          <h3 class="text-xl font-bold mb-2">汽車電系診斷</h3>
          <p class="text-gray-300">掌握電路檢測方法，學習車輛電系維修技巧。</p>
        </div>
      </div>

    </div>
  </section>

  <!-- 彈幕互動區 -->
  <section id="danmakuSection" class="relative h-64 bg-black/50 backdrop-blur my-16 mx-6 rounded-xl flex flex-col items-center justify-center">
    <h2 class="text-2xl font-bold mb-4 text-red-400">點圖送彈幕互動</h2>
    <div class="flex gap-6">
      <img src="https://cdn-icons-png.flaticon.com/512/743/743131.png"
           onclick="sendMessage('引擎拆裝實習中！', '#f87171')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/296/296216.png"
           onclick="sendMessage('底盤結構超重要', '#facc15')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/2332/2332458.png"
           onclick="sendMessage('汽車電系診斷', '#60a5fa')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
      <img src="https://cdn-icons-png.flaticon.com/512/809/809957.png"
           onclick="sendMessage('改裝不是亂改！', '#4ade80')"
           class="w-16 h-16 cursor-pointer hover:scale-110 transition">
    </div>

    <!-- 連線狀態 -->
    <div class="absolute top-4 right-4 flex items-center gap-2 text-white">
      <span id="statusLight" class="w-3 h-3 rounded-full bg-red-500"></span>
      <span id="statusText">未連線</span>
    </div>

    <!-- 彈幕顯示區 -->
    <div id="danmakuArea" class="absolute inset-0 pointer-events-none"></div>
  </section>

</main>

<!-- Footer -->
<footer id="contact" class="bg-gray-900 text-gray-400 py-6 text-center">
  <p>聯絡我們: cartech@school.edu.tw | 版權所有 &copy; 2026 汽車科</p>
</footer>

<script>
  // WebSocket 初始化
  const ws = new WebSocket('ws://localhost:8080');
  const area = document.getElementById('danmakuArea');
  const statusLight = document.getElementById('statusLight');
  const statusText = document.getElementById('statusText');

  ws.onopen = () => {
    statusLight.className = 'w-3 h-3 rounded-full bg-green-500';
    statusText.textContent = '已連線';
  };

  ws.onclose = () => {
    statusLight.className = 'w-3 h-3 rounded-full bg-red-500';
    statusText.textContent = '未連線';
  };

  ws.onmessage = e => {
    const data = JSON.parse(e.data);
    createDanmaku(data.text, data.color);
  };

  function sendMessage(text, color) {
    ws.send(JSON.stringify({ text, color }));
  }

  function createDanmaku(text, color) {
    const msg = document.createElement('div');
    msg.textContent = text;
    msg.className = 'absolute whitespace-nowrap font-bold text-xl drop-shadow-lg';
    msg.style.color = color;

    const top = Math.random() * (window.innerHeight - 120);
    msg.style.top = top + 'px';
    msg.style.right = '-300px';

    area.appendChild(msg);

    const duration = 8000;
    msg.animate([
      { transform: 'translateX(0)' },
      { transform: `translateX(-${window.innerWidth + 400}px)` }
    ], {
      duration,
      easing: 'linear'
    });

    setTimeout(() => msg.remove(), duration);
  }
</script>

</body>
</html>
